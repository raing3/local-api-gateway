name: demo-local-api-gateway

gateway:
  host: 127.0.0.1
  port: 8080
  source: "file:../gateway"
  traceIdHeaderName: 'X-Amzn-Trace-Id'

middleware:
  demo-middleware:
    path: "./middleware/add-headers.js"

integrations:
  demo-docker-integration:
    type: docker
    source: "file:../demo-docker-integration"
    routes:
      - port: 8080
        paths:
          - "/docker"
          - "/docker/*"

  demo-docker-compose-integration:
    type: docker-compose
    source: "file:../demo-docker-compose-integration"
    routes:
      - port: 8080
        service: web
        paths:
          - "/docker-compose"
          - "/docker-compose/*"
      - port: 8080
        service: web2
        paths:
          - "/docker-compose2"
          - "/docker-compose2/*"